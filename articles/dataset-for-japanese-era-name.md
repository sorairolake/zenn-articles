---
title: "å…ƒå·ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œã£ãŸã¯ãªã—"
emoji: "ğŸ—¾"
type: "tech"
topics: ["dataset", "å…ƒå·"]
published: true
published_at: 2024-06-05 07:00
---

## ã¯ã˜ã‚ã«

[æ—¥æœ¬ã®å…ƒå·](<https://ja.wikipedia.org/wiki/%E5%85%83%E5%8F%B7%E4%B8%80%E8%A6%A7_(%E6%97%A5%E6%9C%AC)>)ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œã‚Šã¾ã—ãŸã€‚
åŒ—æœã‚’å«ã‚ãŸå¤§åŒ–ã‹ã‚‰ä»¤å’Œã¾ã§ã®248å€‹ã®å…¨ã¦ã®å…ƒå·ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

## æ§‹é€ 

ãƒ‡ãƒ¼ã‚¿ã¯æ¬¡ã®ã‚ˆã†ãªYAMLã®é€£æƒ³é…åˆ—ã§è¡¨ç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚

```yaml:modern.yaml
era:
  heisei:
    number: 231
    kanji: å¹³æˆ
    kyujitai: null
    english: Heisei
    start: 1989-01-08
    end: 2019-05-01
```

ã‚­ãƒ¼ã¨å€¤ã®ãƒšã‚¢ã®æ„å‘³ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚

- `number`: ä½•ç•ªç›®ã®å…ƒå·ã‹ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
  232å€‹ã®å…ƒå·ä¸€è¦§ã«å«ã¾ã‚Œãªã„ã¨ãã¯`null`ã§ã™ã€‚
- `kanji`: æ–°å­—ä½“ã§ã®å…ƒå·åã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
- `kyujitai`: æ—§å­—ä½“ï¼ˆç•°ä½“å­—ã‚»ãƒ¬ã‚¯ã‚¿ã‚’å«ã‚€ï¼‰ã§ã®å…ƒå·åã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
  æ–°å­—ä½“ã¨å­—ä½“ãŒåŒã˜ã¨ãã¯`null`ã§ã™ã€‚
- `english`: è‹±èªã§ã®å…ƒå·åã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
  ãƒã‚¯ãƒ­ãƒ³ãŒä»˜ã„ã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
- `start`: ãã®å…ƒå·ãŒå§‹ã¾ã£ãŸæ—¥ä»˜ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
- `end`: ãã®å…ƒå·ãŒçµ‚ã‚ã£ãŸæ—¥ä»˜ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
  ç¾åœ¨ã®å…ƒå·ã®ã¨ãã¯`null`ã§ã™ã€‚

å—åŒ—æœæ™‚ä»£ã§ã¯æ¬¡ã®ã‚­ãƒ¼ã¨å€¤ã®ãƒšã‚¢ãŒå­˜åœ¨ã—ã¾ã™ã€‚

- `southern-number`: å—æœã®ä½•ç•ªç›®ã®å…ƒå·ã‹ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
- `northern-number`: åŒ—æœã®ä½•ç•ªç›®ã®å…ƒå·ã‹ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚

YAMLã‚’ä½¿ç”¨ã—ãŸç†ç”±ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚

1.  ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å‹ãŒå­˜åœ¨ã™ã‚‹ã€‚
2.  `null`ãŒå­˜åœ¨ã™ã‚‹ã€‚
3.  JSONã¸ã®å¤‰æ›ãŒæ§‹é€ ã‚’æ®†ã©ç¶­æŒã—ãŸã¾ã¾ã§ãã‚‹ã€‚

## JSONã¸ã®å¤‰æ›

YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®[Deno](https://deno.com/)ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å«ã‚“ã§ã„ã¾ã™ã€‚
å®Ÿè¡Œæ™‚ã«ä¾å­˜é–¢ä¿‚ã‚’è‡ªå‹•çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã€ç°¡å˜ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```sh
# `deno run`ã§å®Ÿè¡Œ
deno run --allow-read --allow-write scripts/yaml2json.ts

# ç›´æ¥å®Ÿè¡Œ
./scripts/yaml2json.ts
```

å‡ºåŠ›ä¾‹:

```json:modern.json
{
  "era": {
    "heisei": {
      "number": 231,
      "kanji": "å¹³æˆ",
      "kyujitai": null,
      "english": "Heisei",
      "start": "1989-01-08T00:00:00.000Z",
      "end": "2019-05-01T00:00:00.000Z"
    }
  }
}
```

## å®Ÿè¡Œä¾‹

232ç•ªç›®ã®å…ƒå·ã®æ–°å­—ä½“ã§ã®å…ƒå·åã‚’å–å¾—ã™ã‚‹ã€‚

```sh
$ cat assets/json/*.json | jq '.[][] | select(.number == 232) | .kanji'
"ä»¤å’Œ"
```

18ä¸–ç´€ã®å…ƒå·ã®å€‹æ•°ã‚’æ•°ãˆã‚‹ã€‚

```sh
$ cat assets/yaml/edo.yaml | yq '.[][] | select(.start >= "1701-01-01" and .end < "1801-01-01") | .number' | wc -l
11
```
